---
title: "[ JS 코딩테스트 LV2 ] 이모티콘 할인행사"
author: <author_id>
categories: [CodingTest,Programmers,"LV 2"]
tags: [JavaScript,CodingTest,Programmers,LV_2]
math: true
toc: true
mermaid: true
image: /images/backgrounds/javascript.png
---


### 문제 설명
카카오톡에서는 이모티콘을 무제한으로 사용할 수 있는 이모티콘 플러스 서비스 가입자 수를 늘리려고 합니다.
이를 위해 카카오톡에서는 이모티콘 할인 행사를 하는데, 목표는 다음과 같습니다.

1. 이모티콘 플러스 서비스 가입자를 최대한 늘리는 것.
2. 이모티콘 판매액을 최대한 늘리는 것.

**1번 목표가 우선이며, 2번 목표가 그 다음입니다.**

이모티콘 할인 행사는 다음과 같은 방식으로 진행됩니다.

- `n`명의 카카오톡 사용자들에게 이모티콘 `m`개를 할인하여 판매합니다.
- 이모티콘마다 할인율은 다를 수 있으며, 할인율은 10%, 20%, 30%, 40% 중 하나로 설정됩니다.

카카오톡 사용자들은 다음과 같은 기준을 따라 이모티콘을 사거나, 이모티콘 플러스 서비스에 가입합니다.

- 각 사용자들은 자신의 기준에 따라 일정 비율 이상 할인하는 이모티콘을 모두 구매합니다.
- 각 사용자들은 자신의 기준에 따라 이모티콘 구매 비용의 합이 일정 가격 이상이 된다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.
  다음은 2명의 카카오톡 사용자와 2개의 이모티콘이 있을때의 예시입니다.

|사용자|	비율|	가격|
|:--:|:--:|:--:|
|1|	40|	10,000|
|2|	25	|10,000|

---

|이모티콘	|가격|
|:--:|:--:|
|1	|7,000|
|2|	9,000|

- 1번 사용자는 40%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.
- 2번 사용자는 25%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.

- 1번 이모티콘의 가격은 7,000원, 2번 이모티콘의 가격은 9,000원입니다.

- 만약, 2개의 이모티콘을 모두 40%씩 할인한다면, 1번 사용자와 2번 사용자 모두 1,2번 이모티콘을 구매하게 되고, 결과는 다음과 같습니다.

|사용자	|구매한 이모티콘|	이모티콘 구매 비용|	이모티콘 플러스 서비스 가입 여부|
|:--:|:--:|:--:|:--:|
|1|	1, 2	|9,600	|X|
|2|	1, 2	|9,600	|X|

이모티콘 플러스 서비스 가입자는 0명이 늘어나고 이모티콘 판매액은 19,200원이 늘어납니다.

- 하지만, 1번 이모티콘을 30% 할인하고 2번 이모티콘을 40% 할인한다면 결과는 다음과 같습니다.

|사용자|	구매한 이모티콘|	이모티콘 구매 비용|	이모티콘 플러스 서비스 가입 여부|
|:--:|:--:|:--:|:--:|
|1|	2	|5,400	|X|
|2|	1, 2|	10,300	|O|

- 2번 사용자는 이모티콘 구매 비용을 10,000원 이상 사용하여 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입하게 됩니다.
- 따라서, 이모티콘 플러스 서비스 가입자는 1명이 늘어나고 이모티콘 판매액은 5,400원이 늘어나게 됩니다.

- 카카오톡 사용자 `n`명의 구매 기준을 담은 2차원 정수 배열 users, 이모티콘 m개의 정가를 담은 1차원 정수 배열 emoticons가 주어집니다. 이때, 행사 목적을 최대한으로 달성했을 때의 이모티콘 플러스 서비스 가입 수와 이모티콘 매출액을 1차원 정수 배열에 담아 return 하도록 solution 함수를 완성해주세요.

### 제한사항
- 1 ≤ users의 길이 = n ≤ 100
  - users의 원소는 [비율, 가격]의 형태입니다.
  - users[i]는 i+1번 고객의 구매 기준을 의미합니다.
  - 비율% 이상의 할인이 있는 이모티콘을 모두 구매한다는 의미입니다.
    - 1 ≤ 비율 ≤ 40
  - 가격이상의 돈을 이모티콘 구매에 사용한다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입한다는 의미입니다.
    - 100 ≤ 가격 ≤ 1,000,000
    - 가격은 100의 배수입니다.
- 1 ≤ emoticons의 길이 = m ≤ 7
  - emoticons[i]는 i+1번 이모티콘의 정가를 의미합니다.
  - 100 ≤ emoticons의 원소 ≤ 1,000,000
  - emoticons의 원소는 100의 배수입니다.

### 입출력 예

|users|	emoticons|	result|
|:--:|:--:|:--:|
|[[40, 10000], [25, 10000]]	|[7000, 9000]	|[1, 5400]|
|[[40, 2900], [23, 10000], [11, 5200], [5, 5900], [40, 3100], [27, 9200], [32, 6900]]	|[1300, 1500, 1600, 4900]|	[4, 13860]|

### 입출력 예 설명
#### 입출력 예 #1

- 문제의 예시와 같습니다.

#### 입출력 예 #2

- 다음과 같이 할인하는 것이 이모티콘 플러스 서비스 가입자를 최대한 늘리면서, 이모티콘 판매액 또한 최대로 늘리는 방법입니다.

|이모티콘|	할인율|
|:--:|:--:|
|1|	40|
|2	|40|
|3|	20|
|4|	40|

- 위와 같이 할인하면 4명의 이모티콘 플러스 가입자와 13,860원의 판매액을 달성할 수 있습니다. 다른 할인율을 적용하여 이모티콘을 판매할 수 있지만 이보다 이모티콘 플러스 서비스 가입자를 최대한 늘리면서, 이모티콘 판매액 또한 최대로 늘리는 방법은 없습니다.
  따라서, [4, 13860]을 return 하면 됩니다.


### 풀이

```javascript
const solution = (users, emoticons) => {
    // 이모티콘 각각에 10% ~ 40% 할인을 적용했을 때 이모티콘 플러스 가입 여부와
    // 이모티콘 결제 금액의 경우의 수를 모두 담을 이차원 배열
    let answer = [];

    // 이모티콘 마다 10% ~ 40%의 할인된 가격을담은 이차원 배열
    // ex ) 	discount = [
    // 1번 이모티콘 =  [ [ 10, 1170 ], [ 20, 1040 ], [ 30, 910 ], [ 40, 780 ] ],
    // 2번 이모티콘 =  [ [ 10, 1350 ], [ 20, 1200 ], [ 30, 1050 ], [ 40, 900 ] ],
    // 3번 이모티콘 =  [ [ 10, 1440 ], [ 20, 1280 ], [ 30, 1120 ], [ 40, 960 ] ],
    // 4번 이모티콘 =  [ [ 10, 4410 ], [ 20, 3920 ], [ 30, 3430 ], [ 40, 2940 ] ]
    // ]
    let discount = [];

    // 이모티콘들의 할인된 가격들의 모든 경우의 수룰 조합할 이차원 배열
    let arr = [];

    // 이모티콘의 정상가가 담긴 배열을 순회
    emoticons.map((value, index) => {
      // discount의 index번째 요소를 빈배열로 선언
      discount[index] = [];
      // for문을 통해 4번 반복
      for (let a = 1; a < 5; a++) {
        // discount의 index 번째 배열에 [ 할인율( a * 10 ),  할인가( value - (a * value) / 10 ) ]를 추가
        // for 문을 통해 10% ~ 40%까지 discount[index]에 추가
        discount[index].push([a * 10, value - (a * value) / 10]);
      }
    });
    // arr에 discount의 첫번째 요소( 1번 이모티콘의 10% ~ 40%할인가가 담긴 배열 )을 추가
    arr.push(discount.splice(0, 1)[0].map((v) => [v]));

    // 2번째 이모티콘 할인가가 담긴 배열 discount순회
    discount.map((v1, i1) => {
      // arr의 마지막 요소와 discount의 조합을 담을 배열
      // ex ) arr[i1] = [ [ 10, 1170 ] ,[ 20, 1040 ] ,[ 30, 910 ] ,[ 40, 780 ] ]
      // ex ) v1 = 	[ [ 10, 1350 ], [ 20, 1200 ], [ 30, 1050 ], [ 40, 900 ] ]
      let combi = [];

      // arr의 i1번째 요소인 이차원 배열 순회
      arr[i1].map((v2) => {
        // 2번 이모티콘부터 할인가가 담긴 배열 v1순희
        v1.map((v3) => {
          // arr의 i1번째 요소에 v1의 요소들을 전부 조합
          // ex )
          //  v2 = [ 10, 1170 ]
          //  v1 = 	[ [ 10, 1350 ], [ 20, 1200 ], [ 30, 1050 ], [ 40, 900 ] ]
          //  combi = [
          //    [ 1번째 이모티콘의 할인가, 2번째 이모티콘의 할인가 ]
          //    [ [ 10, 1170 ], [ 10, 1350 ] ],
          //    [ [ 10, 1170 ], [ 20, 1200 ] ],
          //    [ [ 10, 1170 ], [ 30, 1050 ] ],
          //    [ [ 10, 1170 ], [ 40, 900 ] ]
          //  ]
          combi.push([...v2, v3]);
        });
      });

      // arr에 이모티콘들의 할인가를 조합한 combi 룰 추가
      arr.push(combi);
    });

    // arr의 마지막 요소는 모든 이모티콘들의 할인가의 조합이 담긴 요소이기 때문에
    // 마지막 요소인 이차원 배열 순회
    arr[arr.length - 1].map((v1) => {
      // counts = [ 모든 유저들의 이모티콘 플러스 가입인원, 모든 유저들의 이모티콘 구매비용 ]
      let counts = [0, 0];

      // 유저들의 정보가 담긴 배열 순회
      users.map((v2) => {
        // ex) v1 = [ 1번 이모티콘 [ 10, 1170 ], 2번 이모티콘 [ 10, 1350 ], 3번 이모티콘 [ 10, 1440 ], 4번 이모티콘 [ 10, 4410 ] ]
        // ex) v2 = [ 40( 특정 할인율 이상의 이모티콘만 구매 ), 2900( 유저의 소지 금액 ) ]
        // 1번 이모티콘부터 마지막 이모티콘의 할인가가 조합된 이차원 배열 v1을 filter 함수로 순회하면서
        // 유저가 정해둔 할인율( v2[0] )보다 큰 값만 추려내 변수 새로운 변수 filter 선언
        const filter = v1.filter((v3) => v3[0] >= v2[0]);

        // 유저가 정해둔 할인률보다 큰 값이 없을땐 다음 유저로 이동
        if (filter.length === 0) return;

        // filter의 임모티콘들의 가격을 전부 합산
        const price = filter.map((v) => v[1]).reduce((a, b) => a + b);

        // 합산한 가격이 유저의 소지 금액보다 클 시 이모티콘 플러스를 가입( counts[0]++ )
        // 유저의 자본보다 작을 시 모든 유저들의 이모티콘 구매 비용에 더해줍니다( counts[1] += price)
        price >= v2[1] ? counts[0]++ : (counts[1] += price);
      });
      // answer에 이모티콘들의 특정 할인을 적용했을 시 발생하는 이모티콘 플러스 가입인원과, 가입비용이 담긴 배열을 push
      answer.push(counts);
    });

    // answer을 이모티콘 플러스 가입자가 큰 수부터 내림차순으로 정렬하면서
    // 만약 이모티콘 플러스 가입자가 같으면 이모티콘 구입 비용이 큰 수부터 내림차순으로 정렬 후
    // 그중 마지막 요소를 리턴
    return answer.sort((a, b) =>
      b[0] === a[0] ? b[1] - a[1] : b[0] - a[0]
    )[0];
  };

```
